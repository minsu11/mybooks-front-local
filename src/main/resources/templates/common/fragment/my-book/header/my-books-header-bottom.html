<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thympleaf.org">
<div th:fragment="myBooksHeaderBottomFragment">

    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 col-md-6 col-12">
                <div class="nav-inner">
                    <!-- 카테고리 시작부분  -->
                    <div class="mega-category-menu">
                        <span class="cat-button" id="categoryMenu"><i class="lni lni-menu"></i>All Categories</span>
                        <script>
                            window.addEventListener('DOMContentLoaded', function (){
                                var xhr = new XMLHttpRequest();
                                xhr.open('GET', '/ajax/category', true);
                                xhr.onreadystatechange = function() {
                                    if (xhr.readyState === XMLHttpRequest.DONE) {
                                        if (xhr.status === 200) {
                                            var data = JSON.parse(xhr.responseText);
                                            renderCategories(data);
                                        } else {
                                            console.error('Error fetching categories:', xhr.status);
                                        }
                                    }
                                };
                                xhr.send();
                            });

                            function renderCategories(data) {
                                var categoryMenu = document.getElementById('categoryMenu');
                                var ul1 = document.createElement('ul');
                                ul1.classList.add("sub-category");

                                data.forEach(function(data) {
                                    var li2 = document.createElement('li');
                                    var a1 = document.createElement('a');
                                    a1.href = "#";
                                    a1.text = data.parentCategoryName;
                                    var icon = document.createElement("i");
                                    icon.classList.add("lni", "lni-chevron-right");

                                    var ul3 = document.createElement('ul');
                                    ul3.classList.add("inner-sub-category");

                                    data.childCategoryList.forEach(function(childCategory) {
                                        var li4 = document.createElement('li');
                                        var a2 = document.createElement('a');
                                        a2.href = `#`;
                                        a2.textContent = childCategory.name;
                                        li4.appendChild(a2);
                                        ul3.appendChild(li4);
                                    });

                                    a1.appendChild(icon);
                                    li2.appendChild(a1);
                                    li2.appendChild(ul3);
                                    ul1.appendChild(li2);
                                });
                                categoryMenu.appendChild(ul1);
                            }
                        </script>
                    </div>

                    <!-- End Mega Category Menu -->
                    <!-- Start Navbar -->
                    <nav class="navbar navbar-expand-lg">
                        <button class="navbar-toggler mobile-menu-btn" type="button" data-bs-toggle="collapse"
                                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                aria-expanded="false" aria-label="Toggle navigation">
                            <span class="toggler-icon"></span>
                            <span class="toggler-icon"></span>
                            <span class="toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse sub-menu-bar" id="navbarSupportedContent">
                            <ul id="nav" class="navbar-nav ms-auto">
<!--                                <li class="nav-item">-->
<!--                                    <a href="/" class="active" aria-label="Toggle navigation">홈</a>-->
<!--                                </li>-->
                                <li class="nav-item">
                                    <a class="dd-menu collapsed" href="javascript:void(0)" data-bs-toggle="collapse"
                                       data-bs-target="#submenu-1-2" aria-controls="navbarSupportedContent"
                                       aria-expanded="false" aria-label="Toggle navigation">내 정보</a>
                                    <ul class="sub-menu collapse" id="submenu-1-2">
                                        <li class="nav-item"><a href="/user">마이페이지</a></li>
                                        <li class="nav-item"><a href="/user/address">내 주소</a></li>
                                        <li class="nav-item"><a href="login">쿠폰</a></li>
                                        <li class="nav-item"><a href="register">주문목록</a></li>
                                        <li class="nav-item"><a href="mail-success.html">결제내역</a></li>
                                        <li class="nav-item"><a href="404.html">404 Error</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item">
                                    <a class="dd-menu collapsed" href="javascript:void(0)" data-bs-toggle="collapse"
                                       data-bs-target="#submenu-1-3" aria-controls="navbarSupportedContent"
                                       aria-expanded="false" aria-label="Toggle navigation">Shop</a>
                                    <ul class="sub-menu collapse" id="submenu-1-3">
                                        <li class="nav-item"><a href="product-grids">Shop Grid</a></li>
                                        <li class="nav-item"><a href="product-list">Shop List</a></li>
                                        <li class="nav-item"><a href="product-details">shop Single</a></li>
                                        <li class="nav-item"><a href="cart">Cart</a></li>
                                        <li class="nav-item"><a href="checkout">Checkout</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item">
                                    <a class="dd-menu collapsed" href="javascript:void(0)" data-bs-toggle="collapse"
                                       data-bs-target="#submenu-1-4" aria-controls="navbarSupportedContent"
                                       aria-expanded="false" aria-label="Toggle navigation">Blog</a>
                                    <ul class="sub-menu collapse" id="submenu-1-4">
                                        <li class="nav-item"><a href="/blog-grid-sidebar">Blog Grid Sidebar</a>
                                        </li>
                                        <li class="nav-item"><a href="blog-single">Blog Single</a></li>
                                        <li class="nav-item"><a href="blog-single-sidebar">Blog Single
                                            Sibebar</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item">
                                    <a href="contact" aria-label="Toggle navigation">Contact Us</a>
                                </li>
                            </ul>
                        </div> <!-- navbar collapse -->
                    </nav>
                    <!-- End Navbar -->
                </div>
            </div>
            <div class="col-lg-4 col-md-6 col-12">
                <!-- 소설 관련 버튼 시작  -->
                <div class="nav-social">
                    <h5 class="title">Follow Us:</h5>
                    <ul>
                        <li>
                            <a href="javascript:void(0)"><i class="lni lni-facebook-filled"></i></a>
                        </li>
                        <li>
                            <a href="javascript:void(0)"><i class="lni lni-twitter-original"></i></a>
                        </li>
                        <li>
                            <a href="javascript:void(0)"><i class="lni lni-instagram"></i></a>
                        </li>
                        <li>
                            <a href="javascript:void(0)"><i class="lni lni-skype"></i></a>
                        </li>
                    </ul>
                </div>
                <!-- 소셜 관련 버튼 끝 -->
            </div>
        </div>
    </div>
    <!-- End Header Bottom -->
</div>
</html>